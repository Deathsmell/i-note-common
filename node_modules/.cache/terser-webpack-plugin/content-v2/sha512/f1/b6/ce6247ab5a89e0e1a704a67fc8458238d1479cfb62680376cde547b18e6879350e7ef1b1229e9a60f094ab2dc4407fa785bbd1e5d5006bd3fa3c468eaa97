{"map":{"version":3,"sources":["static/js/main.36abed98.chunk.js"],"names":["this","push","136","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","objectSpread2","toConsumableArray","lib","note_hook","updateNote","oldNote","_ref","id","width","height","x","y","color","text","type","replace","defaultNote","isEqual","updatedNote","TypeMessage","react_markdown","react_markdown_default","components_Note","focus","setFocus","note","noteIndex","notes","setNotes","connection","_useState","Object","_useState2","changed","setChanged","_useState3","_useState4","zIndex","setZIndex","_useState5","_useState6","setText","_useNote","updateStateNotes","concat","filter","sendNewPosition","send","JSON","stringify","changeColorHandler","e","changeColor","target","value","console","log","a","createElement","className","disableDragging","style","size","minWidth","minHeight","position","onDragStop","event","data","onResizeStop","direction","ref","delta","bounds","backgroundColor","onClick","onMouseLeave","prev","noteFromState","onChange","autoFocus","onBlur","ws_hook","setConnection","update","serverNote","reducer","action","Array","isArray","error","updatePosition","respNote","parse","connected","url","window","location","href","webSocket","WebSocket","onmessage","onopen","src_App","onDoubleClick","newNote","clientX","clientY","map","index","key","render","document","getElementById","50","exports","55"],"mappings":"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"},"code":"(this[\"webpackJsonpi-note-common\"]=this[\"webpackJsonpi-note-common\"]||[]).push([[0],{136:function(e,t,n){\"use strict\";n.r(t);var o=n(0),c=n.n(o),a=n(19),i=n.n(a),r=(n(55),n(56),n(4)),u=n(49),l=n(10),s=n(48),f=function(){return{updateNote:function(e,t){var n=t.id,o=t.width,c=t.height,a=t.x,i=t.y,r=t.color,u=t.text,l=t.type;return\"string\"===typeof o&&(o=o.replace(/px$/,\"\")),\"string\"===typeof c&&(c=c.replace(/px$/,\"\")),{id:n||e.id,width:o||e.width,height:c||e.height,x:~a?a:e.x,y:~i?i:e.y,color:r||e.color,text:u||e.text||\" \",type:l||null}},defaultNote:{id:null,text:\"\",width:200,height:200,x:0,y:0,type:\"\",color:\"\"},isEqual:function(e,t){return e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.color===t.color&&e.text===t.text}}},d=\"create\",b=\"update\",h=\"delete\",p=n(47),y=n.n(p),m=function(e){var t=e.focus,n=e.setFocus,a=e.note,i=e.color,d=e.noteIndex,p=e.notes,m=e.setNotes,x=e.connection,g=Object(o.useState)(!1),v=Object(r.a)(g,2),O=v[0],j=v[1],w=Object(o.useState)(1),E=Object(r.a)(w,2),N=E[0],k=E[1],C=Object(o.useState)(a.text),S=Object(r.a)(C,2),I=S[0],J=S[1],z=f(),D=z.updateNote,F=z.isEqual;Object(o.useEffect)((function(){return k(0),function(){k(0)}}),[]),Object(o.useEffect)((function(){k(t?1:0)}),[t]);var $=function(e){m((function(){return[].concat(Object(l.a)(p.filter((function(t){return t.id!==e.id}))),[e])}))},q=function(e,t){return x.send(JSON.stringify(Object(u.a)({},t,{type:e})))},A=function(e){var t=e.target.value;if(t!==i){console.log(\"update color\");var n=D(a,{color:t});$(n),q(b,n)}};return Object(o.useEffect)((function(){if(!O){var e=D(a,{text:I});$(e),q(b,e)}}),[O]),c.a.createElement(s.a,{className:\"note\",disableDragging:t,style:{zIndex:N},size:{width:p[d].width,height:p[d].height},minWidth:250,minHeight:250,position:{x:p[d].x,y:p[d].y},onDragStop:function(e,t){if(a.x!==t.x&&t.y!==a.y){var n=D(a,{x:t.x,y:t.y});q(b,n),$(n)}},onResizeStop:function(e,t,n,o,c){var i=D(a,{width:n.style.width,height:n.style.height,x:c.x,y:c.y});F(a,i)||($(i),q(b,i))},bounds:\"window\"},c.a.createElement(\"div\",{className:\"note-header\",style:{backgroundColor:i||\"gold\"},onClick:function(){return k(1)},onMouseLeave:function(){return k(0)}},c.a.createElement(\"div\",{className:\"color-buttons\"},c.a.createElement(\"button\",{className:\"btn blue\",value:\"blue\",onClick:A}),c.a.createElement(\"button\",{className:\"btn pink\",value:\"pink\",onClick:A}),c.a.createElement(\"button\",{className:\"btn yellow\",value:\"yellow\",onClick:A})),c.a.createElement(\"div\",{className:\"cross\",onClick:function(){q(h,a),m((function(e){return Object(l.a)(e.filter((function(e){return e.id!==a.id})))}))}},\"\\xd7\")),O?c.a.createElement(\"textarea\",{className:\"note-text\",value:I,onChange:function(e){var t=e.target.value;J(t)},autoFocus:!0,onBlur:function(){j(!1),n(!1)}}):c.a.createElement(\"div\",{id:\"preview\",className:\"note-body\",onClick:function(){j(!0),n(!0)}},c.a.createElement(y.a,null,I)))},x=function(e,t){var n=Object(o.useState)(null),c=Object(r.a)(n,2),a=c[0],i=c[1],u=Object(o.useCallback)((function(e){t((function(t){return[].concat(Object(l.a)(t.filter((function(t){return t.id!==e.id}))),[e])}))}),[t]),s=Object(o.useCallback)((function(e,n){switch(n){case d:case b:return u(e);case h:return t((function(t){return Object(l.a)(t.filter((function(t){return t.id!==e.id})))}));default:Array.isArray(e)?t((function(){return e})):console.error(\"Incorrect data message\",n,e)}}),[t,u]),f=Object(o.useCallback)((function(e){var t=e.data;if(t){var n=JSON.parse(t);s(n,n.type)}}),[s]),p=function(){console.log(\"connected\")};return Object(o.useEffect)((function(){if(null===a){var e=window.location.href.replace(/^http/,\"ws\").replace(/3000\\/$/,\"5000/\");console.log(e);var t=new WebSocket(e);t.onmessage=f,t.onopen=p,i(t)}}),[a,f]),{connection:a}},g=function(){var e=f(),t=e.defaultNote,n=e.updateNote,a=Object(o.useState)([]),i=Object(r.a)(a,2),u=i[0],l=i[1],s=Object(o.useState)(!1),b=Object(r.a)(s,2),h=b[0],p=b[1],y=x(u,l).connection;return c.a.createElement(\"div\",{className:\"workspace\",onDoubleClick:function(e){if(!h){var o=n(t,{x:e.clientX,y:e.clientY,type:d});y.send(JSON.stringify(o))}}},u&&u.map((function(e,t){return c.a.createElement(m,{key:e.id,noteIndex:t,note:e,notes:u,focus:h,setFocus:p,setNotes:l,connection:y,color:e.color})})))};i.a.render(c.a.createElement(g,null),document.getElementById(\"root\"))},50:function(e,t,n){e.exports=n(136)},55:function(e,t,n){}},[[50,1,2]]]);","extractedComments":[]}