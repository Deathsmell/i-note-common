{"ast":null,"code":"var _jsxFileName = \"/home/deathsmell/WebstormProjects/i-note-common/src/components/Note.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Rnd } from \"react-rnd\";\nconst style = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"solid 1px #ddd\",\n  background: \"#f0f0f0\"\n};\n\nconst Note = ({\n  indexInState,\n  state,\n  setState\n}) => {\n  const [transformNote, setTransformNote] = useState(false);\n  const [text, setText] = useState('');\n  const rnd = useRef();\n\n  const savePositionWhenTransformation = () => {\n    console.log(\"change\", state.x !== 0);\n\n    if (state.x !== 0 || state.y !== 0) {\n      localStorage.setItem('position', JSON.stringify({\n        x: state.x,\n        y: state.y\n      }));\n      console.log(\"position\");\n      setState([...state, { ...state[indexInState],\n        x: 0,\n        y: 0\n      }]);\n    } else if (state.x === 0 && state.y === 0) {\n      const stringPosition = localStorage.getItem('position');\n\n      if (stringPosition) {\n        const {\n          x,\n          y\n        } = JSON.parse(stringPosition);\n        console.log(\"update \");\n        state[indexInState] = { ...state[indexInState],\n          x,\n          y\n        };\n        setState(state);\n      }\n    }\n  };\n\n  const getPositionIfRefreshPage = () => {\n    if (state.x === 0 && state.y === 0) {\n      const stringPosition = localStorage.getItem('position');\n\n      if (stringPosition) {\n        const {\n          x,\n          y\n        } = JSON.parse(stringPosition); // rnd.updatePosition({x,y})\n\n        setState([...state, { ...state[indexInState],\n          x,\n          y\n        }]);\n      }\n    }\n  };\n\n  useEffect(getPositionIfRefreshPage, []);\n  useEffect(savePositionWhenTransformation, [transformNote]);\n\n  const onDragStopHandler = (event, data) => {\n    console.log(state, data.x, data.y);\n    state[indexInState] = { ...state[indexInState],\n      x: data.x,\n      y: data.y\n    };\n    console.log(state);\n    setState(state);\n  };\n\n  const onResizeStopHandler = (e, direction, ref, delta, position) => {\n    console.log(\"direction\", direction);\n    console.log(\"ref\", ref);\n    console.log('delta', delta);\n    console.log(\"position\", position);\n    setState([...state, { ...state[indexInState],\n      width: ref.style.width,\n      height: ref.style.height,\n      ...position\n    }]);\n  };\n\n  return /*#__PURE__*/React.createElement(Rnd, {\n    ref: rnd,\n    className: `note${transformNote ? '-activate' : ''}`,\n    disableDragging: transformNote,\n    style: { ...style\n    },\n    size: {\n      width: state[indexInState].width,\n      height: state[indexInState].height\n    },\n    minWidth: 250,\n    minHeight: 250,\n    position: {\n      x: state.x,\n      y: state.y\n    },\n    onDragStop: onDragStopHandler,\n    onResizeStop: onResizeStopHandler,\n    bounds: \"window\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"note-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"color-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cross\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"\\xD7\")), transformNote ? /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"note-text\",\n    style: {\n      resize: 'none',\n      backgroundColor: \"grey\",\n      width: '100%',\n      height: \"100%\"\n    },\n    value: text,\n    onChange: e => setText(e.target.value),\n    onDoubleClick: () => setTransformNote(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"note-body\",\n    style: {\n      backgroundColor: 'grey'\n    },\n    onDoubleClick: () => setTransformNote(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, text));\n};\n\nexport default Note;","map":{"version":3,"sources":["/home/deathsmell/WebstormProjects/i-note-common/src/components/Note.js"],"names":["React","useEffect","useRef","useState","Rnd","style","display","alignItems","justifyContent","border","background","Note","indexInState","state","setState","transformNote","setTransformNote","text","setText","rnd","savePositionWhenTransformation","console","log","x","y","localStorage","setItem","JSON","stringify","stringPosition","getItem","parse","getPositionIfRefreshPage","onDragStopHandler","event","data","onResizeStopHandler","e","direction","ref","delta","position","width","height","resize","backgroundColor","target","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\"\nimport {Rnd} from \"react-rnd\"\n\nconst style = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    border: \"solid 1px #ddd\",\n    background: \"#f0f0f0\",\n};\n\nconst Note = ({indexInState, state, setState}) => {\n\n    const [transformNote, setTransformNote] = useState(false);\n    const [text, setText] = useState('');\n    const rnd = useRef();\n\n\n    const savePositionWhenTransformation = () => {\n        console.log(\"change\", state.x !== 0)\n        if (state.x !== 0 || state.y !== 0) {\n            localStorage.setItem('position', JSON.stringify({x: state.x, y: state.y}))\n            console.log(\"position\")\n            setState(\n                [...state, {...state[indexInState], x: 0, y: 0}]\n            )\n        } else if (state.x === 0 && state.y === 0) {\n            const stringPosition = localStorage.getItem('position');\n            if (stringPosition) {\n                const {x, y} = JSON.parse(stringPosition);\n                console.log(\"update \")\n                state[indexInState] = {\n                    ...state[indexInState],\n                    x, y\n                }\n                setState(state)\n            }\n        }\n    };\n\n    const getPositionIfRefreshPage = () => {\n        if (state.x === 0 && state.y === 0) {\n            const stringPosition = localStorage.getItem('position');\n            if (stringPosition) {\n                const {x, y} = JSON.parse(stringPosition);\n                // rnd.updatePosition({x,y})\n                setState([...state, {\n                    ...state[indexInState],\n                    x, y\n                }])\n            }\n        }\n    }\n\n    useEffect(getPositionIfRefreshPage, [])\n    useEffect(savePositionWhenTransformation, [transformNote])\n\n\n    const onDragStopHandler = (event, data) => {\n        console.log(state,data.x,data.y);\n        state[indexInState] = {...state[indexInState], x: data.x, y: data.y}\n        console.log(state);\n        setState(state)\n    }\n\n    const onResizeStopHandler = (e, direction, ref, delta, position) => {\n        console.log(\"direction\", direction);\n        console.log(\"ref\", ref);\n        console.log('delta', delta)\n        console.log(\"position\", position);\n        setState([...state, {\n            ...state[indexInState],\n            width: ref.style.width,\n            height: ref.style.height,\n            ...position\n        }]);\n    }\n\n    return (\n        <Rnd\n            ref={rnd}\n            className={`note${transformNote ? '-activate' : ''}`}\n            disableDragging={transformNote}\n            style={{...style}}\n            size={{width: state[indexInState].width, height: state[indexInState].height}}\n            minWidth={250}\n            minHeight={250}\n            position={{x: state.x, y: state.y}}\n            onDragStop={onDragStopHandler}\n            onResizeStop={onResizeStopHandler}\n            bounds={\"window\"}\n        >\n            <div className=\"note-header\">\n                <div className=\"color-buttons\">\n                    <button className=\"btn btn-success\"/>\n                    <button className=\"btn btn-danger\"/>\n                    <button className=\"btn btn-secondary\"/>\n                </div>\n                <div className=\"cross\">\n                    &times;\n                </div>\n            </div>\n            {\n                transformNote\n                    ?\n                    (\n                        <textarea\n                            className=\"note-text\"\n                            style={{resize: 'none', backgroundColor: \"grey\", width: '100%', height: \"100%\"}}\n                            value={text}\n                            onChange={(e) => setText(e.target.value)}\n                            onDoubleClick={() => setTransformNote(false)}\n                        >\n\n                            </textarea>\n                    )\n                    : (\n                        <div className=\"note-body\"\n                             style={{backgroundColor: 'grey'}}\n                             onDoubleClick={() => setTransformNote(true)}\n                        >\n                            {text}\n                        </div>\n                    )\n            }\n        </Rnd>\n    )\n}\n\nexport default Note"]},"metadata":{},"sourceType":"module"}