{"ast":null,"code":"var _jsxFileName = \"/home/deathsmell/WebstormProjects/i-note-common/src/App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Rnd } from \"react-rnd\";\nconst style = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"solid 1px #ddd\",\n  background: \"#f0f0f0\"\n};\n\nconst App = () => {\n  const [transformNote, setTransformNote] = useState(false);\n  const [text, setText] = useState('');\n  const [state, setState] = useState({\n    width: 200,\n    height: 200,\n    x: 10,\n    y: 10\n  });\n  useEffect(() => {\n    console.log(\"change\", state.x !== 0);\n\n    if (state.x === 0 || state.y === 0) {\n      setState({ ...state,\n        x: 0,\n        y: 0\n      });\n    }\n  }, [transformNote]);\n\n  const onDragStopHandler = (event, data) => {\n    console.log(event);\n    setState(prev => {\n      if (data.x !== prev.x || data.y !== prev.y) {\n        return {\n          x: data.x,\n          y: data.y\n        };\n      }\n\n      if (!transformNote) localStorage.setItem('position', JSON.stringify({\n        x: d.x,\n        y: d.y\n      }));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Rnd, {\n    className: `${transformNote ? 'note' : ''}`,\n    disableDragging: transformNote,\n    style: { ...style,\n      transition: transformNote ? \"all 1s\" : ''\n    },\n    size: {\n      width: state.width,\n      height: state.height\n    },\n    position: transformNote ? JSON.parse(localStorage.getItem('position')) || {\n      x: state.x,\n      y: state.y\n    } : {\n      x: state.x,\n      y: state.y\n    },\n    onDragStop: onDragStopHandler,\n    onResizeStop: (e, direction, ref, delta, position) => {\n      setState({\n        width: ref.style.width,\n        height: ref.style.height,\n        ...position\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, transformNote ? /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"h-100 w-100\",\n    style: {\n      resize: 'none'\n    },\n    value: text,\n    onChange: e => setText(e.target.value),\n    onDoubleClick: () => setTransformNote(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-100 w-100\",\n    style: {\n      backgroundColor: 'white'\n    },\n    onDoubleClick: () => setTransformNote(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, text));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/deathsmell/WebstormProjects/i-note-common/src/App.js"],"names":["React","useEffect","useState","Rnd","style","display","alignItems","justifyContent","border","background","App","transformNote","setTransformNote","text","setText","state","setState","width","height","x","y","console","log","onDragStopHandler","event","data","prev","localStorage","setItem","JSON","stringify","d","transition","parse","getItem","e","direction","ref","delta","position","resize","target","value","backgroundColor"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\"\nimport {Rnd} from \"react-rnd\";\n\nconst style = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    border: \"solid 1px #ddd\",\n    background: \"#f0f0f0\",\n};\n\nconst App = () => {\n\n    const [transformNote, setTransformNote] = useState(false);\n    const [text, setText] = useState('');\n\n    const [state, setState] = useState({\n        width: 200,\n        height: 200,\n        x: 10,\n        y: 10\n    });\n\n    useEffect(() => {\n        console.log(\"change\", state.x !== 0)\n        if (state.x === 0 || state.y === 0) {\n            setState(\n                {...state, x: 0, y: 0}\n            )\n        }\n    }, [transformNote])\n\n    const onDragStopHandler = (event, data) => {\n        console.log(event);\n        setState((prev) => {\n            if (data.x !== prev.x || data.y !== prev.y) {\n                return {x: data.x, y: data.y}\n            }\n            if (!transformNote) localStorage.setItem('position', JSON.stringify({x: d.x, y: d.y}))\n        })\n    }\n\n    return (\n        <Rnd\n            className={`${transformNote ? 'note' : ''}`}\n            disableDragging={transformNote}\n            style={{...style, transition: transformNote ? \"all 1s\" : ''}}\n            size={{width: state.width, height: state.height}}\n            position={transformNote ? JSON.parse(localStorage.getItem('position')) || {x: state.x, y: state.y}\n                : {x: state.x, y: state.y}\n            }\n            onDragStop={onDragStopHandler}\n            onResizeStop={(e, direction, ref, delta, position) => {\n                setState({\n                    width: ref.style.width,\n                    height: ref.style.height,\n                    ...position\n                });\n            }}\n        >\n            {\n                transformNote\n                    ?\n                    (\n                        <textarea\n                            className=\"h-100 w-100\"\n                            style={{resize: 'none'}}\n                            value={text}\n                            onChange={(e) => setText(e.target.value)}\n                            onDoubleClick={() => setTransformNote(false)}\n                        >\n\n                            </textarea>\n                    )\n                    : (\n                        <div className=\"h-100 w-100\"\n                             style={{backgroundColor: 'white'}}\n                             onDoubleClick={() => setTransformNote(true)}\n                        >\n                            {text}\n                        </div>\n                    )\n            }\n        </Rnd>\n    )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}