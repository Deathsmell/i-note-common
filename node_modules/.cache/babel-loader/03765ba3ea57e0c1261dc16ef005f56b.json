{"ast":null,"code":"var _jsxFileName = \"/home/deathsmell/WebstormProjects/i-note-common/src/components/Note.js\";\nimport React, { useRef, useState } from \"react\";\nimport { Rnd } from \"react-rnd\";\nimport useNote from \"../hooks/note.hook\";\nimport { TypeMessage } from \"../hooks/TypeMessage\";\nconst style = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"solid 1px #ddd\",\n  background: \"#f0f0f0\"\n};\n\nconst Note = ({\n  note,\n  noteIndex,\n  noteId,\n  serverText,\n  notes,\n  setNotes,\n  connection\n}) => {\n  const rnd = useRef();\n  const [transformNote, setTransformNote] = useState(false);\n  const [text, setText] = useState(serverText);\n  const {\n    updateNote\n  } = useNote();\n\n  const updateStateNotes = updatedNote => {\n    setNotes(prev => [...prev.filter(note => note.id !== updatedNote.id), updatedNote]);\n  };\n\n  const sendNewPosition = (type, note) => connection.send(JSON.stringify({ ...note,\n    type\n  }));\n\n  const onDragStopHandler = (event, data) => {\n    const updatedNote = updateNote(note, {\n      x: data.x,\n      y: data.y\n    });\n    updateStateNotes(updatedNote);\n    sendNewPosition(TypeMessage.UPDATE, updatedNote);\n  };\n\n  const onResizeStopHandler = (e, direction, ref, delta, position) => {\n    const updatedNote = updateNote(note, {\n      width: ref.style.width,\n      height: ref.style.height,\n      x: position.x,\n      y: position.y\n    });\n    updateStateNotes(updatedNote);\n    sendNewPosition(TypeMessage.UPDATE, updatedNote);\n  };\n\n  const deleteNoteHandler = () => {\n    // todo: create delete function on cross icon\n    console.log(\"Nothing to do\");\n  };\n\n  return /*#__PURE__*/React.createElement(Rnd, {\n    ref: rnd,\n    className: `note${transformNote ? '-activate' : ''}`,\n    disableDragging: transformNote,\n    style: { ...style\n    },\n    size: {\n      width: notes[noteIndex].width,\n      height: notes[noteIndex].height\n    },\n    minWidth: 250,\n    minHeight: 250,\n    position: {\n      x: notes[noteIndex].x,\n      y: notes[noteIndex].y\n    },\n    onDragStop: onDragStopHandler,\n    onResizeStop: onResizeStopHandler,\n    bounds: \"window\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"note-header\",\n    style: {\n      backgroundColor: notes[noteIndex].color || \"gold\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"color-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cross\",\n    onClick: deleteNoteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, \"\\xD7\")), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"note-text\",\n    value: text,\n    onChange: e => setText(e.target.value),\n    onDoubleClick: () => setTransformNote(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Note;","map":{"version":3,"sources":["/home/deathsmell/WebstormProjects/i-note-common/src/components/Note.js"],"names":["React","useRef","useState","Rnd","useNote","TypeMessage","style","display","alignItems","justifyContent","border","background","Note","note","noteIndex","noteId","serverText","notes","setNotes","connection","rnd","transformNote","setTransformNote","text","setText","updateNote","updateStateNotes","updatedNote","prev","filter","id","sendNewPosition","type","send","JSON","stringify","onDragStopHandler","event","data","x","y","UPDATE","onResizeStopHandler","e","direction","ref","delta","position","width","height","deleteNoteHandler","console","log","backgroundColor","color","target","value"],"mappings":"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","sourcesContent":["import React, {useRef, useState} from \"react\"\nimport {Rnd} from \"react-rnd\"\nimport useNote from \"../hooks/note.hook\";\nimport {TypeMessage} from \"../hooks/TypeMessage\";\n\nconst style = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    border: \"solid 1px #ddd\",\n    background: \"#f0f0f0\",\n};\n\nconst Note = ({note, noteIndex, noteId, serverText, notes, setNotes, connection}) => {\n\n\n    const rnd = useRef();\n    const [transformNote, setTransformNote] = useState(false);\n    const [text, setText] = useState(serverText);\n    const {updateNote} = useNote();\n\n    const updateStateNotes = (updatedNote) => {\n        setNotes((prev) => [...prev.filter(note => note.id !== updatedNote.id), updatedNote])\n    }\n    const sendNewPosition = (type, note) => connection.send(JSON.stringify({...note, type}))\n\n    const onDragStopHandler = (event, data) => {\n        const updatedNote = updateNote(note, {x: data.x, y: data.y});\n        updateStateNotes(updatedNote)\n        sendNewPosition(TypeMessage.UPDATE, updatedNote)\n    }\n\n    const onResizeStopHandler = (e, direction, ref, delta, position) => {\n        const updatedNote = updateNote(note, {\n            width: ref.style.width,\n            height: ref.style.height,\n            x: position.x,\n            y: position.y\n        });\n        updateStateNotes(updatedNote)\n        sendNewPosition(TypeMessage.UPDATE, updatedNote)\n    }\n\n    const deleteNoteHandler = () => {\n        // todo: create delete function on cross icon\n        console.log(\"Nothing to do\")\n    }\n\n    return (\n        <Rnd\n            ref={rnd}\n            className={`note${transformNote ? '-activate' : ''}`}\n            disableDragging={transformNote}\n            style={{...style}}\n            size={{width: notes[noteIndex].width, height: notes[noteIndex].height}}\n            minWidth={250}\n            minHeight={250}\n            position={{x: notes[noteIndex].x, y: notes[noteIndex].y}}\n            onDragStop={onDragStopHandler}\n            onResizeStop={onResizeStopHandler}\n            bounds={\"window\"}\n        >\n            <div className=\"note-header\"\n                 style={{backgroundColor: notes[noteIndex].color || \"gold\"}}\n            >\n                <div className=\"color-buttons\">\n                    <button className=\"btn btn-success\"/>\n                    <button className=\"btn btn-danger\"/>\n                    <button className=\"btn btn-secondary\"/>\n                </div>\n                <div className=\"cross\"\n                     onClick={deleteNoteHandler}\n                >\n                    &times;\n                </div>\n            </div>\n            <textarea\n                className=\"note-text\"\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                onDoubleClick={() => setTransformNote(false)}\n            />\n        </Rnd>\n    )\n}\n\nexport default Note"]},"metadata":{},"sourceType":"module"}